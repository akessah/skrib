---
timestamp: 'Fri Oct 17 2025 13:22:45 GMT-0400 (Eastern Daylight Time)'
content_id: 672486632d55486d4f6a444f8273dc0f304c60f903fcfa7346014ac4204a4a70
---

# file: src\concepts\skrib\Posting.ts

```typescript
import { Collection, Db } from "npm:mongodb";
import { Empty, ID } from "@utils/types.ts";
import { freshID } from "@utils/database.ts";


// Declare collection prefix, use concept name
const PREFIX = "Posting" + ".";

// Generic types of this concept
type User = ID;


//internal ids
type Post = ID;

/**
 * a set of Posts with
 *  a body String
 *  an author User
 */
interface Posts {
  _id: Post;
  author: User;
  body: string;
}


/**
 * @concept Post
 * @purpose to allow users to upload content, generally to ask for book recommendations
 */
export default class PostingConcept {
  private posts: Collection<Posts>;


  constructor(private readonly db: Db) {
    this.posts = this.db.collection(PREFIX + "posts");
  }


  /**
   * Creates a post
   * @effects creates a post with body by user and adds it to Posts set
   *
   */
  async createPost({ user, body }: { user: User; body: string }): Promise<{post: Post}> {

    const postId = freshID() as Post;
    await this.posts.insertOne({
      _id: postId,
      author: user,
      body,
    });
    return { post: postId };
  }



  /**
   * Deletes a post
   * @requires post exists
   * @effects removes post from Posts set
   */
  async deletePost({ post }: { post: Post;}): Promise<Empty|{error: string}> {
    const existingPost = await this.posts.findOne({ _id: post });
    if (!existingPost) {
      return { error: `Survey with ID ${post} not found.` };
    }

    this.posts.deleteOne({_id: post})
    return {};
  }



  /**
   * Edits an existing post
   * @requires post exists
   * @effects replaces body of post with newBody
   */
  async editPost({ post, newBody }: { post: Post; newBody: string }): Promise<Empty|{error: string}> {
    const existingPost = await this.posts.findOne({ _id: post });
    if (!existingPost) {
      return { error: `Survey with ID ${post} not found.` };
    }
    await this.posts.updateOne({_id: post }, { $set: { body: newBody } });
    return {};
  }



  /**
   * returns all posts created by author
   */
  async _getPostsByAuthor({ author }: { author: User }): Promise<Posts[]> {
    return await this.posts.find({ author }).toArray();
  }

  /**
   * returns all posts in database
   */
  async _getAllPosts(): Promise<Posts[]> {
    return await this.posts.find().toArray();
  }
}

```
